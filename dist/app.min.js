var footballApp=angular.module("footballApp",["ui.router","ui.bootstrap"]);
footballApp.config(["$stateProvider","$urlRouterProvider",function(e,t){t.otherwise("/dashboard"),e.state("dashboard",{url:"/dashboard",templateUrl:"dashboard-view/dashboard-view.html"}).state("matches",{url:"/matches",templateUrl:"matches-view/matches-view.html"}).state("teams",{url:"/teams",templateUrl:"teams-view/teams-view.html",controller:"TeamsViewCtrl"}).state("championships",{url:"/championships",templateUrl:"championships-view/championships-view.html",controller:"ChampionshipsViewCtrl"})}]);
footballApp.constant("RouteConstants",{championshipsUrl:"http://footballbet.com.ua/api/championships/",teamsUrl:"http://footballbet.com.ua/api/teams/",matchesUrl:"http://footballbet.com.ua/api/matches/",teamLogoUrl:"http://footballbet.com.ua/teams/embl/",championshipLogoUrl:"http://footballbet.com.ua/table/embl/"});
footballApp.factory("DataService",["$http","$q","$filter","RouteConstants",function(e,t,o,r){var a={};return a.getChampionships=function(){var a=t.defer();return e.get(r.championshipsUrl).then(function(t){var n=t.data.result;e.get(r.teamsUrl).then(function(e){for(var t=e.data.result,i=0;i<t.length;i++)t[i].logoImage=r.teamLogoUrl+t[i].emblema;for(var l=0;l<n.length;l++)n[l].teamList=o("filter")(t,{id_championship:n[l].id_championship}),n[l].logoImage=r.championshipLogoUrl+n[l].image;console.log(n),a.resolve(n)})}),a.promise},a.getTeams=function(){var o=t.defer();return e.get(r.teamsUrl).then(function(e){for(var t=e.data.result,a=0;a<t.length;a++)t[a].logoImage=r.teamLogoUrl+t[a].emblema;o.resolve(t)}),o.promise},a.getMatches=function(){return e.get(matchesUrl)},a}]);
footballApp.directive("championship",function(){return{restrict:"E",templateUrl:"championship/championship.html",replace:!0,scope:{championship:"="}}});
footballApp.controller("ChampionshipsViewCtrl",["$scope","DataService",function(i,e){i.selectedChampionship=null,e.getChampionships().then(function(e){i.championshipList=e}),i.selectChampionship=function(e){i.selectedChampionship=e}}]);


footballApp.directive("team",function(){return{restrict:"E",templateUrl:"team/team.html",replace:!0,scope:{team:"="}}});
footballApp.controller("TeamsViewCtrl",["$scope","DataService",function(e,t){t.getTeams().then(function(t){e.teamList=t})}]);